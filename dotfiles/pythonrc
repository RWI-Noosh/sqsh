import atexit
import os
import re
import readline
import rlcompleter
import socket
import _socket
import sys
import time
import timeit

history = os.path.expanduser('~/.python_history')
if os.path.exists(history):
    readline.read_history_file(history)
readline.parse_and_bind('tab: complete')
atexit.register(readline.write_history_file, history)

def t(*args):
    return timeit.Timer(*args).timeit()

def xf(pattern):
    """ eXecute File

    Modifies globals(). Be careful.

    """
    import glob
    files = glob.glob(os.path.expanduser(pattern))
    if len(files) != 1:
        raise Exception('A single match is expected. files: {}'.format(files))
    exec(open(files[0]).read(), globals(), globals())

def fa(obj, pattern):
    """ Filter Attributes. """
    import fnmatch
    return fnmatch.filter(dir(obj), pattern)
